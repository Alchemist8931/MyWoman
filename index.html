<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>–ü—Ä–∏–≤–µ—Ç, –õ—é–±–∏–º–∞—è üåô</title>

  <!-- Comfortaa from Google Fonts -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@300;400;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --glass-bg: rgba(255,255,255,.12);
      --glass-bright: rgba(255,255,255,.18);
      --text: #fff;
      --fade-dur: .6s;
      --rise-dur: 1s;
    }

    * { box-sizing: border-box; }
    html, body { height: 100%; }

    body {
      margin: 0;
      font-family: "Comfortaa", system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      background:
        linear-gradient(0deg, rgba(0,0,0,.45), rgba(0,0,0,.45)),
        url('https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=1400&q=80')
        no-repeat center / cover fixed;
      color: var(--text);
      text-align: center;
      overflow: hidden;
    }

    .overlay {
      position: fixed;
      inset: 0;
      pointer-events: none;
    }

    .container {
      position: relative;
      z-index: 1;
      width: min(720px, 92vw);
      background: var(--glass-bg);
      backdrop-filter: blur(12px) saturate(120%);
      -webkit-backdrop-filter: blur(12px) saturate(120%);
      border-radius: 24px;
      padding: clamp(18px, 4vw, 32px);
      box-shadow: 0 8px 36px rgba(0,0,0,.35);
      animation: rise var(--rise-dur) ease forwards;
    }

    h1, .end-text {
      margin: 0;
      line-height: 1.55;
      font-weight: 400;
      font-size: clamp(18px, 3.6vw, 28px);
    }

    .lead {
      opacity: 0;
      transform: translateY(12px);
      animation: textIn .9s ease forwards .15s;
    }

    .btn {
      display: inline-block;
      margin-top: 22px;
      padding: 12px 26px;
      background: var(--glass-bg);
      color: var(--text);
      border: 1px solid rgba(255,255,255,.22);
      border-radius: 999px;
      cursor: pointer;
      font-size: clamp(15px, 3.2vw, 18px);
      transition: transform .2s ease, background .25s ease, border-color .25s ease, opacity .2s ease;
      user-select: none;
      -webkit-tap-highlight-color: transparent;
    }
    .btn:hover { transform: translateY(-1px); background: var(--glass-bright); }
    .btn:active { transform: scale(.98); }

    .choice {
      display: none;
      gap: 12px;
      margin-top: 18px;
      flex-wrap: wrap;
      justify-content: center;
    }
    .choice .btn { flex: 1 1 220px; min-width: 140px; }

    /* Smooth fades */
    .fade-in   { animation: fadeIn var(--fade-dur) ease forwards; }
    .fade-out  { animation: fadeOut var(--fade-dur) ease forwards; }

    @keyframes fadeIn   { from {opacity: 0; transform: translateY(6px)} to {opacity: 1; transform: translateY(0)} }
    @keyframes fadeOut  { from {opacity: 1; transform: translateY(0)} to {opacity: 0; transform: translateY(-6px)} }
    @keyframes textIn   { from {opacity: 0; transform: translateY(12px)} to {opacity: 1; transform: translateY(0)} }
    @keyframes rise     { from {opacity: 0; transform: translateY(12px)} to {opacity: 1; transform: translateY(0)} }

    /* Mobile-friendly spacing */
    @media (max-width: 420px){
      .container { padding: 18px; border-radius: 18px; }
      .choice { gap: 10px; }
    }

    /* Small helper note at the bottom (optional) */
    .tiny {
      position: fixed; inset-inline: 0; bottom: 8px;
      font-size: 11px; opacity: .55; letter-spacing: .02em;
      text-align: center; pointer-events: none;
    }
  </style>
</head>
<body>
  <div class="overlay" aria-hidden="true"></div>

  <div class="container" role="region" aria-label="–°–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è –ª—é–±–∏–º–æ–π">
    <h1 id="text" class="lead">–ü—Ä–∏–≤–µ—Ç, –õ—é–±–∏–º–∞—è üåô</h1>

    <button class="btn" id="nextBtn" type="button" aria-controls="text">–î–∞–ª–µ–µ</button>

    <div class="choice" id="choiceBtns" aria-live="polite">
      <button class="btn" id="yesBtn" type="button">–ú–Ω–µ –Ω—Ä–∞–≤–∏—Ç—Å—è –ø–ª–∞–Ω üíõ</button>
      <!-- –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç –±–µ–∑ —É–ø–æ–º–∏–Ω–∞–Ω–∏—è –Ω–∞—Å–∏–ª–∏—è -->
      <button class="btn" id="noBtn" type="button">–Ø —Ç–µ–±—è –∏–∑–Ω–∞—Å–∏–ª—É—é –ª—é–±–∏–º—ã–π –±–µ–∑ –ø—Ä–µ–ª—é–¥–∏–π.. —Ä–æ–º–∞–Ω—Ç–∏–∫ –±–ª–∏–Ω üòà</button>
    </div>
  </div>

  <div class="tiny" aria-hidden="true">–ú—É–∑—ã–∫–∞ –≤–∫–ª—é—á–∏—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –Ω–∞–∂–∞—Ç–∏–∏</div>

  <audio id="bgMusic" loop>
    <source src="https://dl.dropboxusercontent.com/scl/fi/9arrkfp20cjsv0a7t3cpm/ambient-background-347405_115805.mp3?rlkey=1jaxyfkyp4gmmyqjrqcg1hf9f&st=dcxkxh6v&dl=0" type="audio/mpeg">
  </audio>

  <script>
  // ===== CONFIG =====
  // –°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–± –¥–ª—è —Å—Ç–∞—Ç–∏–∫–∏ (GitHub Pages): FormSubmit -> –ø–∏—Å—å–º–æ –Ω–∞ –ø–æ—á—Ç—É
  // –ü–æ–º–µ–Ω—è–π –ø–æ—á—Ç—É –Ω–∏–∂–µ –Ω–∞ —Å–≤–æ—é (–∏–ª–∏ –æ—Å—Ç–∞–≤—å –∫–∞–∫ –µ—Å—Ç—å, –µ—Å–ª–∏ –ø–æ–¥—Ö–æ–¥–∏—Ç):
  const FORM_URL = "https://formsubmit.co/rosatomicalchemist@gmail.com"; // –º–æ–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ —Å–≤–æ–π –∞–¥—Ä–µ—Å
  const SEND_DECISIONS = true; // –≤—ã–∫–ª—é—á–∏, –µ—Å–ª–∏ –Ω–µ –Ω—É–∂–Ω–æ —Å–ª–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

  // –ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è Telegram-–æ—Ç–ø—Ä–∞–≤–∫–∞: –æ—Å—Ç–∞–≤–ª–µ–Ω–æ –∫–∞–∫ –∑–∞–≥–æ—Ç–æ–≤–∫–∞.
  // –ï—Å–ª–∏ –∫–æ–≥–¥–∞-–Ω–∏–±—É–¥—å –∑–∞—Ö–æ—á–µ—à—å ‚Äî —Å–æ–∑–¥–∞–π –±–æ—Ç–∞ –∏ Chat ID, –∑–∞—Ç–µ–º —Å–Ω–∏–º–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏.
  // !!! –•—Ä–∞–Ω–∏—Ç—å —Ç–æ–∫–µ–Ω –≤ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ –Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ, –ª—É—á—à–µ –ø—Ä–æ–∫–∏–Ω—É—Ç—å –µ–≥–æ —á–µ—Ä–µ–∑ —Å–≤–æ–π backend –∏–ª–∏ Google Apps Script !!!
  // const TG_BOT_TOKEN = "PASTE_YOUR_BOT_TOKEN";
  // const TG_CHAT_ID   = "PASTE_YOUR_CHAT_ID";

  // ===== CONTENT =====
  const texts = [
    "–ü—Ä–∏–≤–µ—Ç, –õ—é–±–∏–º–∞—è üåô",
    "–ù–∞—á–∏–Ω–∞–µ—Ç—Å—è –¥–µ–Ω—å –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è –¥–æ–º–æ–π.",
    "–Ø –æ—á–µ–Ω—å —Å–∫—É—á–∞–ª.",
    "–ù–∞–¥–µ—é—Å—å, —Å–±–æ—Ä—ã –∏ –¥–æ—Ä–æ–≥–∞ –±—É–¥—É—Ç –ª—ë–≥–∫–∏–º–∏.",
    "–î–µ–Ω–µ–≥ —è —Ç–∞–∫ –∏ –Ω–µ –∑–∞—Ä–∞–±–æ—Ç–∞–ª –∫ —Ç–≤–æ–µ–º—É –ø—Ä–∏–µ–∑–¥—É((, –∏ –≤—Å—ë –±—É–¥–µ—Ç –Ω–µ —Ç–∞–∫ –∫–∞–∫ —è —Ñ–∞–Ω—Ç–∞–∑–∏—Ä–æ–≤–∞–ª((",
    "–ù–æ –º—ã —Ç–µ–±—è –æ—á–µ–Ω—å –∂–¥—ë–º —Å –¥–µ—Ç–∫–∞–º–∏.",
    "–í—á–µ—Ä–∞ –≤–µ—Å—å –¥–µ–Ω—å –ø—Ä–∏–±–∏—Ä–∞–ª–∏—Å—å, –≥–æ—Ç–æ–≤–∏–ª–∏ —Å –Ω–∏–º–∏.",
    "–Ø –±—É–¥—É —Ç–µ–±—è –∂–¥–∞—Ç—å –ø–æ –ø—Ä–∏–ª—ë—Ç—É –≤ –∞—ç—Ä–æ–ø–æ—Ä—Ç—É.",
    "–ù–∞–∫–æ–Ω–µ—Ü-—Ç–æ –ø—Ä–æ–≤–µ–¥—ë–º –≤–µ—á–µ—Ä –≤–º–µ—Å—Ç–µ –≤ —á–∏—Å—Ç–æ–π –∏ —É—é—Ç–Ω–æ–π –Ω–∞—à–µ–π –∫–≤–∞—Ä—Ç–∏—Ä–∫–µ.",
    "–Ø —Ç–µ–±—è –Ω–∞–∫–æ—Ä–º–ª—é –≤–∫—É—Å–Ω—ã–º —á–∞—Ö–æ—Ö–±–∏–ª–∏ –∏ —Å–¥–µ–ª–∞—é –±—Ä—É—Å–∫–µ—Ç—Ç—ã.",
    "–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ —Ö–æ—Ç–µ–ª–æ—Å—å –±—ã, —á—Ç–æ–±—ã —Ç—ã –æ—Ç–¥–æ—Ö–Ω—É–ª–∞ —Å –¥–æ—Ä–æ–≥–∏.",
    "–ö–∞–∫ –Ω–µ–º–Ω–æ–≥–æ –ø–æ—Å–ø–∏—à—å, —è –Ω–∞–º–∞–∂—É —Ç–µ–±—è –º–µ–¥–ª–µ–Ω–Ω–æ –∫—Ä–µ–º—É—à–∫–æ–º.",
    "–º–µ–¥–ª–µ–Ω–Ω–æ‚Ä¶ –º–µ–¥–ª–µ–Ω–Ω–æ‚Ä¶ –ø—Ä–æ–≥–ª–∞–∂–∏–≤–∞—è –∫–∞–∂–¥—ã–π —Å–∞–Ω—Ç–∏–º–µ—Ç—Ä‚Ä¶",
    "—Ç–≤–æ–∏—Ö –∫—Ä–∞—Å–∏–≤—ã—Ö —Ä—É—á–µ–∫‚Ä¶",
    "—Ç–≤–æ–∏—Ö –∫—Ä–∞—Å–∏–≤—ã—Ö –Ω–æ–∂–µ–∫‚Ä¶",
    "–∏—Å—Ü–µ–ª—É—é —Ç–≤–æ—é —à–µ—é‚Ä¶",
    "—Ç–≤–æ—é –ø–æ–ø—É‚Ä¶",
    "–∞ –ø–æ—Å–ª–µ‚Ä¶",
    "—è –ø–æ–ø—Ä–æ—à—É –Ω–∞–¥–µ—Ç—å —á—Ç–æ-–Ω–∏–±—É–¥—å –∫—Ä–∞—Å–∏–≤–æ–µ‚Ä¶",
    "—Ç—ã –±—É–¥–µ—à—å –ø—å—è–Ω–µ–Ω—å–∫–∞—è‚Ä¶ üòà",
    "–∑–∞–±—É–¥–µ–º –æ –ø—Ä–∏–ª–∏—á–∏—è—Ö, —É—Ç–æ–ª—è—è –≥–æ–ª–æ–¥ –±–ª–∏–∑–æ—Å—Ç–∏ –∏ —Å—Ç—Ä–∞—Å—Ç–∏, –Ω–∞–∫–æ–ø–∏–≤—à–∏–π—Å—è –∑–∞ –≤—Ä–µ–º—è —Ä–∞–∑–ª—É–∫–∏ üòà",
    "–î–µ–π—Å—Ç–≤—É–µ–º –ø–æ –ø–ª–∞–Ω—É? üíõ"
  ];

  // ===== DOM =====
  const textEl = document.getElementById("text");
  const nextBtn = document.getElementById("nextBtn");
  const choiceWrap = document.getElementById("choiceBtns");
  const yesBtn = document.getElementById("yesBtn");
  const noBtn = document.getElementById("noBtn");
  const bgMusic = document.getElementById("bgMusic");

  // ===== STATE =====
  let i = 0;                      // —Ç–µ–∫—É—â–∏–π –∏–Ω–¥–µ–∫—Å —Ç–µ–∫—Å—Ç–∞
  let musicStarted = false;
  let noCount = 0;
  const MAX_NO = 3;

  // ===== AUDIO =====
  function fadeInMusic(targetVol = 0.5, step = 0.02, everyMs = 120){
    try { bgMusic.volume = 0; } catch(e) {}
    const tick = setInterval(() => {
      try {
        if (bgMusic.volume + step < targetVol) {
          bgMusic.volume = Math.min(targetVol, bgMusic.volume + step);
        } else {
          clearInterval(tick);
        }
      } catch(e){ clearInterval(tick); }
    }, everyMs);
  }
  function startMusic(){
    if (musicStarted) return;
    musicStarted = true;
    const p = bgMusic.play();
    if (p && p.then){
      p.then(() => fadeInMusic()).catch(() => {
        // –ø–æ–≤—Ç–æ—Ä–Ω–∞—è –ø–æ–ø—ã—Ç–∫–∞
        setTimeout(() => bgMusic.play().then(() => fadeInMusic()).catch(()=>{}), 150);
      });
    }
  }

  // ===== HELPERS =====
  function switchText(nextHtml){
    // –ø–ª–∞–≤–Ω—ã–π —É—Ö–æ–¥ —Ç–µ–∫—É—â–µ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
    textEl.classList.remove("fade-in");
    textEl.classList.add("fade-out");
    nextBtn.style.pointerEvents = "none";

    setTimeout(() => {
      textEl.innerHTML = `<div class="end-text">${nextHtml}</div>`;
      textEl.classList.remove("fade-out");
      textEl.classList.add("fade-in");
      nextBtn.style.pointerEvents = "auto";
    }, 600); // –¥–æ–ª–∂–Ω–æ —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å --fade-dur
  }

  function showChoices(){
    nextBtn.style.display = "none";
    choiceWrap.style.display = "flex";
    choiceWrap.classList.add("fade-in");
  }

  // –û—Ç–ø—Ä–∞–≤–∫–∞ –≤—ã–±–æ—Ä–∞ –Ω–∞ –ø–æ—á—Ç—É —á–µ—Ä–µ–∑ FormSubmit (—Å—Ç–∞—Ç–∏—á–Ω–æ, –±–µ–∑ backend)
  function sendDecision(status, extra){
    if (!SEND_DECISIONS) return;

    const subject = status === "AGREED"
      ? "üéâ –õ—é–±–∏–º–∞—è –°–û–ì–õ–ê–°–ò–õ–ê–°–¨"
      : "üòî –õ—é–±–∏–º–∞—è –û–¢–ö–õ–û–ù–ò–õ–ê (3 —Ä–∞–∑–∞)";

    const data = new FormData();
    data.append("_subject", subject);
    data.append("_captcha", "false");
    data.append("–°—Ç–∞—Ç—É—Å", status);
    data.append("–°–æ–æ–±—â–µ–Ω–∏–µ", extra || "");
    data.append("–í—Ä–µ–º—è", new Date().toLocaleString());

    // –ü—ã—Ç–∞–µ–º—Å—è –ø–æ—Å–ª–∞—Ç—å —Ç–∞–∫, —á—Ç–æ–±—ã —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–ª–∞—Å—å
    fetch(FORM_URL, { method: "POST", body: data, mode: "no-cors" })
      .then(() => console.log("Decision sent (FormSubmit):", status))
      .catch(err => console.warn("FormSubmit error:", err));

    // ==== –ù–ï–ë–ï–ó–û–ü–ê–°–ù–´–ô –ü–†–ò–ú–ï–† –î–õ–Ø TELEGRAM (–æ—Å—Ç–∞–≤–ª–µ–Ω –∫–∞–∫ —Å–ø—Ä–∞–≤–∫–∞) ====
    // if (TG_BOT_TOKEN && TG_CHAT_ID) {
    //   const msg = encodeURIComponent(`–°—Ç–∞—Ç—É—Å: ${status}\n–¢–µ–∫—Å—Ç: ${extra || ""}\n–í—Ä–µ–º—è: ${new Date().toLocaleString()}`);
    //   fetch(`https://api.telegram.org/bot${TG_BOT_TOKEN}/sendMessage?chat_id=${TG_CHAT_ID}&text=${msg}`)
    //     .catch(()=>{});
    // }
  }

  // ===== WIRES =====
  // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å—Ç–∞—Ä—Ç–æ–≤—ã–π —Ç–µ–∫—Å—Ç —è–≤–Ω–æ (–Ω–∞ –≤—Å—è–∫–∏–π)
  textEl.innerHTML = `<div class="end-text">${texts[0]}</div>`;

  nextBtn.addEventListener("click", () => {
    if (!musicStarted) startMusic();

    if (i < texts.length - 1) {
      i++;
      switchText(texts[i]);

      if (i === texts.length - 1) {
        // –ø–æ—Å–ª–µ–¥–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ -> –ø–æ–∫–∞–∑–∞—Ç—å –≤–∞—Ä–∏–∞–Ω—Ç—ã
        setTimeout(showChoices, 620);
      }
    }
  });

  yesBtn.addEventListener("click", () => {
    const msg = "–¢–æ–≥–¥–∞ –±–µ–≥–∏ —Å–∫–æ—Ä–µ–µ —Å–æ–±–∏—Ä–∞—Ç—å—Å—è üåô<br>–Ø –±—É–¥—É —Ç–µ—á—å, –æ–π, —Ç–æ –µ—Å—Ç—å –∂–¥–∞—Ç—å, —Ç–µ–±—è –≤ –∞—ç—Ä–æ–ø–æ—Ä—Ç—É üòâ";
    switchText(msg);
    choiceWrap.style.display = "none";
    sendDecision("AGREED", "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±—Ä–∞–ª: –ú–Ω–µ –Ω—Ä–∞–≤–∏—Ç—Å—è –ø–ª–∞–Ω üíõ");
  });

  noBtn.addEventListener("click", () => {
    noCount++;
    if (noCount >= MAX_NO) {
      switchText("–û—á–µ–Ω—å –∂–∞–ª—å üòî");
      choiceWrap.style.display = "none";
      sendDecision("REJECTED", "–û—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –ø–æ—Å–ª–µ 3 –ø–æ–ø—ã—Ç–æ–∫");
    } else {
      switchText("–¢–∞–∫ –¥–µ–ª–æ –Ω–µ –ø–æ–π–¥—ë—Ç üòè<br>–ü–æ–ø—Ä–æ–±—É–π —Å–¥–µ–ª–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤—ã–±–æ—Ä üíõ");
      choiceWrap.style.display = "none";
      setTimeout(() => {
        switchText(texts[texts.length - 1]);
        choiceWrap.style.display = "flex";
      }, 2500);
    }
  });

  // –ú–∞–ª–µ–Ω—å–∫–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è iOS: –∑–∞–ø—É—Å–∫ –∞—É–¥–∏–æ –ø–æ –ø–µ—Ä–≤–æ–º—É –∫–∞—Å–∞–Ω–∏—é –≥–¥–µ —É–≥–æ–¥–Ω–æ
  window.addEventListener("touchstart", () => { if (!musicStarted) startMusic(); }, { once: true });
  </script>
</body>
</html>
